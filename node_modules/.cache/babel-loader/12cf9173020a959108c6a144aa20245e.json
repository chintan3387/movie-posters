{"ast":null,"code":"var _jsxFileName = \"/Users/chintan.desai/Projects/movie-db-app/src/components/movie-db-container/movie-db-container.js\";\nimport React from \"react\";\nimport { Container, Row, Col } from \"react-bootstrap\";\nimport { connect } from \"react-redux\";\nimport { AppBar } from \"material-ui\";\nimport _ from \"lodash\";\nimport * as movieActions from \"../../actions/movie-db-actions\";\nimport * as movieDbHelpers from \"../../common/helper\";\nimport MoviesListComponent from \"../moviesList/moviesListComponent\";\n\nclass MovieDbContainer extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleScroll = () => {\n      const topMovies = this.props.topMovies;\n\n      if (!topMovies.isLoading) {\n        let percentageScrolled = movieDbHelpers.getScrollDownPercentage(window);\n\n        if (percentageScrolled > 0.9) {\n          const nextPage = this.state.currentPage + 1;\n          this.props.getMoviesList(nextPage);\n          this.setState({\n            currentPage: nextPage\n          });\n          window.scrollTo({\n            top: \"50%\",\n            behavior: \"smooth\"\n          });\n        }\n      }\n    };\n\n    this.state = {\n      currentPage: 1\n    };\n  }\n\n  componentDidMount() {\n    window.onscroll = _.throttle(this.handleScroll, 1000);\n    this.props.getMoviesList(this.state.currentPage);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"scroll\", this.handleScroll);\n  }\n\n  render() {\n    const topMovies = this.props.topMovies;\n    const movies = movieDbHelpers.getMovieList(topMovies.response);\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42\n      },\n      __self: this\n    }, React.createElement(AppBar, {\n      title: \"Pop Movies\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43\n      },\n      __self: this\n    }), React.createElement(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46\n      },\n      __self: this\n    }, \"Search will go here!\")), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, React.createElement(MoviesListComponent, {\n      movies: movies,\n      isLoading: topMovies.isLoading,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nconst mapStateToProps = (state, ownProps) => {\n  console.log(state);\n  return {\n    topMovies: state.movieDb.moviesList\n  };\n};\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n  return {\n    getMoviesList: page => {\n      dispatch(movieActions.getMoviesList(page));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MovieDbContainer);","map":{"version":3,"sources":["/Users/chintan.desai/Projects/movie-db-app/src/components/movie-db-container/movie-db-container.js"],"names":["React","Container","Row","Col","connect","AppBar","_","movieActions","movieDbHelpers","MoviesListComponent","MovieDbContainer","Component","constructor","props","handleScroll","topMovies","isLoading","percentageScrolled","getScrollDownPercentage","window","nextPage","state","currentPage","getMoviesList","setState","scrollTo","top","behavior","componentDidMount","onscroll","throttle","componentWillUnmount","removeEventListener","render","movies","getMovieList","response","mapStateToProps","ownProps","console","log","movieDb","moviesList","mapDispatchToProps","dispatch","page"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {Container, Row, Col} from \"react-bootstrap\";\nimport {connect} from \"react-redux\";\nimport {AppBar} from \"material-ui\";\nimport _ from \"lodash\";\nimport * as movieActions from \"../../actions/movie-db-actions\";\nimport * as movieDbHelpers from \"../../common/helper\";\nimport MoviesListComponent from \"../moviesList/moviesListComponent\";\n\nclass MovieDbContainer extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            currentPage: 1\n        };\n    }\n    componentDidMount() {\n        window.onscroll = _.throttle(this.handleScroll, 1000);\n        this.props.getMoviesList(this.state.currentPage);\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener(\"scroll\", this.handleScroll);\n    }\n\n    handleScroll = () => {\n        const {topMovies} = this.props;\n        if (!topMovies.isLoading) {\n            let percentageScrolled = movieDbHelpers.getScrollDownPercentage(window);\n            if (percentageScrolled > 0.9) {\n                const nextPage = this.state.currentPage + 1;\n                this.props.getMoviesList(nextPage);\n                this.setState({currentPage: nextPage});\n                window.scrollTo({top: \"50%\", behavior: \"smooth\"});\n            }\n        }\n    };\n    render() {\n        const {topMovies} = this.props;\n        const movies = movieDbHelpers.getMovieList(topMovies.response);\n        return (\n            <div>\n                <AppBar title=\"Pop Movies\" />\n                <Container>\n                    <Row>\n                        <p>Search will go here!</p>\n                    </Row>\n                    <Row>\n                        <MoviesListComponent movies={movies} isLoading={topMovies.isLoading} />\n                    </Row>\n                </Container>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state, ownProps) => {\n    console.log(state);\n    return {\n        topMovies: state.movieDb.moviesList\n    };\n};\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n    return {\n        getMoviesList: page => {\n            dispatch(movieActions.getMoviesList(page));\n        }\n    };\n};\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(MovieDbContainer);\n"]},"metadata":{},"sourceType":"module"}